deps=()
pkgname=readline
pkgver=6.3
src="http://ftp.gnu.org/gnu/readline/readline-6.3.tar.gz"
website="http://cnswww.cns.cwru.edu/php/chet/readline/rltop.html"
diskusage="13.5 MB"
buildtime="0.1 SBU"
function pkgfetch {
    if [ ! -f "/usr/src/"$(basename $src) ]; then
        wget $src -O /usr/src/$(basename $src)
    fi
    tar -xf /usr/src/$(basename $src) -C $pkgdir
    }

function pkgmake {
cd $pkgdir/$pkgname-$pkgver
patch -Np1 -i ../readline-6.3-upstream_fixes-3.patch
sed -i '/MV.*old/d' Makefile.in
sed -i '/{OLDSUFF}/c:' support/shlib-install
./configure --prefix=/usr --disable-static --docdir=/usr/share/doc/readline-6.3
make SHLIB_LIBS=-lncurses
}

function pkginstall {
cd $pkgdir/$pkgname-$pkgver
make DESTDIR=$installdir SHLIB_LIBS=-lncurses install
}

function pkgafterinstall {
cd $installdir
mv -v /usr/lib/lib{readline,history}.so.* /lib
ln -sfv ../../lib/$(readlink /usr/lib/libreadline.so) /usr/lib/libreadline.so
ln -sfv ../../lib/$(readlink /usr/lib/libhistory.so ) /usr/lib/libhistory.so
install -v -m644 doc/*.{ps,pdf,html,dvi} /usr/share/doc/readline-6.3
}
